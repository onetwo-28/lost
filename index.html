<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Interactive Art - Amusement Park</title>
  <style>
    body {
      margin: 0;
      overflow-x: auto;
      overflow-y: auto;
    }
    #scene-container {
      background-image: url('background.png');
      background-repeat: no-repeat;
      background-size: cover;
      width: 4700px;
      height: 100vh;
      overflow-x: auto;
      background-size: contain;
    }
    .interact {
      position: absolute;
      cursor: pointer;
    }
    .door {
      transition: opacity 0.3s;
      transform: scale(0.2);
      transform-origin: top left;
    }
    #carousel-static,
    #carousel-anim,
    #ferris-static,
    #ferris-anim,
    #musicians-static,
    #musicians-anim {
      transform: scale(0.5);
      transform-origin: top left;
    }
    #girl-idle, #girl-turn, #girl-walk {
      position: absolute;
      top: 690px;
      left: -50px;
      height: 200px;
      display: none;
      pointer-events: none;
    }
    #girl-idle { display: block; }
  </style>
</head>
<body>
  <div id="scene-container">
    $1
    <img id="girl-idle-left" src="girl_idle_left.gif" style="display: none;" />
    $1
    <img id="girl-walk-left" src="girl_walk_left.gif" style="display: none;" />

    <!-- Carousel -->
    <img class="interact" id="carousel-static" src="carousel_static.png" style="top: 400px; left: 400px; transform: scale(0.33);" />
    <img class="interact" id="carousel-anim" src="carousel.gif" style="top: 400px; left: 400px; display: none; transform: scale(0.33);" />

    <!-- Ferris Wheel -->
    <img class="interact" id="ferris-static" src="ferris_static.png" style="top: 180px; left: 1200px;" />
    <img class="interact" id="ferris-anim" src="ferris.gif" style="top: 180px; left: 1200px; display: none;" />

    <!-- Musicians -->
    <img class="interact" id="musicians-static" src="musicians_static.png" style="top: 200px; left: 2100px;" />
    <img class="interact" id="musicians-anim" src="musicians.gif" style="top: 200px; left: 2100px; display: none;" />

    <!-- Doors -->
    <img class="interact door" id="door1" src="door1.png" style="top: 170px; left: 3900px;" />
    <img class="interact door" id="door2" src="door2.png" style="top: 170px; left: 4000px;" />
    <img class="interact door" id="door3" src="door3.png" style="top: 170px; left: 4100px;" />
    <img class="interact door" id="door4" src="door4.png" style="top: 170px; left: 4200px;" />
  </div>

  <script>
    const girlIdle = document.getElementById("girl-idle");
const girlIdleLeft = document.getElementById("girl-idle-left");
const girlWalkLeft = document.getElementById("girl-walk-left");
const girlTurnLeft = document.getElementById("girl-turn-left");
    const girlTurn = document.getElementById("girl-turn");
    const girlWalk = document.getElementById("girl-walk");
    let girlX = -50;

    function showGIF(state) {
  girlIdle.style.display = state === "idle" ? "block" : "none";
  girlIdleLeft.style.display = state === "idle-left" ? "block" : "none";
  girlTurn.style.display = state === "turn" ? "block" : "none";
  girlTurnLeft.style.display = state === "turn-left" ? "block" : "none";
  girlWalk.style.display = state === "walk-right" ? "block" : "none";
  girlWalkLeft.style.display = state === "walk-left" ? "block" : "none";
}

    function moveGirlTo(targetX, onArrival) {
  const direction = girlX < targetX ? 'right' : 'left';
  showGIF(direction === 'right' ? "turn" : "turn-left");
  setTimeout(() => {
    showGIF(direction === 'right' ? "walk-right" : "walk-left");
    const interval = setInterval(() => {
      if ((direction === 'right' && girlX < targetX) || (direction === 'left' && girlX > targetX)) {
        girlX += direction === 'right' ? 5 : -5;
        girlIdle.style.left = girlIdleLeft.style.left = girlTurn.style.left = girlTurnLeft.style.left = girlWalk.style.left = girlWalkLeft.style.left = girlX + "px";
      } else {
        clearInterval(interval);
        showGIF(direction === 'right' ? "idle" : "idle-left");
        if (onArrival) onArrival();
      }
    }, 20);
  }, 1000);
} else {
            clearInterval(interval);
            showGIF("idle");
            if (onArrival) onArrival();
          }
        }, 20);
      }, 1000);
    }

    function handleInteraction(staticId, animId, targetX) {
      moveGirlTo(targetX - 50, () => {
        const staticEl = document.getElementById(staticId);
        const animEl = document.getElementById(animId);

        staticEl.style.display = "none";
        animEl.style.display = "block";

        setTimeout(() => {
          animEl.style.display = "none";
          staticEl.style.display = "block";
        }, 10000);
      });
    }

    document.getElementById("carousel-static").addEventListener("click", () => {
      handleInteraction("carousel-static", "carousel-anim", 300);
    });

    document.getElementById("ferris-static").addEventListener("click", () => {
      handleInteraction("ferris-static", "ferris-anim", 1200);
    });

    document.getElementById("musicians-static").addEventListener("click", () => {
      handleInteraction("musicians-static", "musicians-anim", 2100);
    });

    document.querySelectorAll('.door').forEach(door => {
      door.addEventListener("click", () => {
        door.style.display = door.style.display === "none" ? "block" : "none";
      });
    });
  document.getElementById("scene-container").addEventListener("click", (e) => {
  const containerRect = document.getElementById("scene-container").getBoundingClientRect();
  const targetX = e.clientX + window.scrollX - 100;
  moveGirlTo(targetX);
});

</script>
</body>
</html>
